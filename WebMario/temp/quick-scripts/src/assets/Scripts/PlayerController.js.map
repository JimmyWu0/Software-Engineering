{"version":3,"sources":["assets\\Scripts\\PlayerController.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA8C,oCAAY;IAA1D;QAAA,qEAoYC;QAjYG,iBAAW,GAAW,GAAG,CAAC;QAG1B,sBAAgB,GAAW,EAAE,CAAC;QAG9B,UAAI,GAAiB,IAAI,CAAC;QAG1B,iBAAW,GAAiB,IAAI,CAAC;QAGjC,YAAM,GAAiB,IAAI,CAAC;QAG5B,SAAG,GAAiB,IAAI,CAAC;QAGzB,mBAAa,GAAiB,IAAI,CAAC;QAGnC,iBAAW,GAAiB,IAAI,CAAC;QAGjC,SAAG,GAAiB,IAAI,CAAC;QAEjB,aAAO,GAAG,CAAC,CAAC;QACZ,cAAQ,GAAY,KAAK,CAAC;QAC1B,eAAS,GAAY,KAAK,CAAC;QAC3B,mBAAa,GAAsB,IAAI,CAAC;QACxC,cAAQ,GAAY,KAAK,CAAC;QAC1B,eAAS,GAAmB,IAAI,CAAC;QACjC,UAAI,GAAiB,IAAI,CAAC;QAElC,QAAE,GAAW,CAAC,CAAC;QAEf,aAAO,GAAG,IAAI,CAAC;QAEP,cAAQ,GAAY,KAAK,CAAC;QAElC,WAAK,GAAW,CAAC,CAAC;QAElB,iBAAW,GAAG,IAAI,CAAC;QAEnB,UAAI,GAAW,GAAG,CAAC;QAEnB,aAAO,GAAG,IAAI,CAAC;QAEf,YAAM,GAAY,KAAK,CAAC;QACxB,aAAO,GAAY,IAAI,CAAC;QACxB,aAAO,GAAY,KAAK,CAAC;QACzB,cAAQ,GAAY,KAAK,CAAC;QAC1B,aAAO,GAAY,KAAK,CAAC;;IA6U7B,CAAC;IA3UG,iCAAM,GAAN;QACI,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QACrD,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE,CAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAE7C,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC3E,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC3E,CAAC;IAED,gCAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC;QAC1D,6BAA6B;QAC7B,kEAAkE;QAClE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,MAAM,GAAC,CAAC,CAAC;QACnB,oCAAoC;QACpC,aAAa;QACb,gBAAgB;QAChB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACjB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QACpB,6BAA6B;QAC7B,sBAAsB;QACtB,iBAAiB;IACrB,CAAC;IAED,iCAAM,GAAN,UAAQ,EAAE;QACN,IAAG,CAAC,IAAI,CAAC,OAAO,EAAC,EAAG,uEAAuE;YACvF,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YACpD,uDAAuD;SAC1D;aACG;YACA,uDAAuD;SAC1D;QACD,iDAAiD;QACjD,IAAG,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO;YAChC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;aACpB,IAAG,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO;YACrC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC;YACpD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;YAErB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAE1B,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,6DAA6D;QAC7D,yDAAyD;QACzD,kCAAkC;QAClC,IAAI;QAEJ,6BAA6B;QAC7B,uCAAuC;QACvC,2GAA2G;QAC3G,kCAAkC;QAClC,IAAI;QACJ,IAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAC,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,IAAI,KAAK,EAAC;YACjD,IAAG,IAAI,CAAC,OAAO;gBACX,4BAA4B;gBAC5B,0DAA0D;gBAC1D,SAAS;gBACT,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,GAAC,SAAS,GAAC,SAAS,CAAC;YAClD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;QACD,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;YACZ,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC;SACnB;QACD,MAAM;QACN,IAAG,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC;YAC7B,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;SACjB;QACD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;IAClF,CAAC;IAED,oCAAS,GAAT,UAAU,KAAK;QAEX,IAAG,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,EAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACnB,OAAO;SACV;QAED,QAAO,KAAK,CAAC,OAAO,EACpB;YACI,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpB,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK;gBACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACnB,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC;YACxB,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBAChB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;gBACrB,MAAM;SACb;IACL,CAAC;IAED,kCAAO,GAAP,UAAQ,KAAK;QAET,IAAG,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,EAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACnB,OAAO;SACV;QAED,QAAO,KAAK,CAAC,OAAO,EACpB;YACI,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI;gBAClB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAG,IAAI,CAAC,SAAS;oBACb,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;;oBAEnB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK;gBACnB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAG,IAAI,CAAC,QAAQ;oBACZ,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;;oBAEpB,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM;SACb;IACL,CAAC;IAED,yCAAc,GAAd,UAAe,OAAO,EAAE,IAAI,EAAE,KAAK;QAC/B,IAAG,IAAI,CAAC,MAAM;YACV,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC5B,iCAAiC;QACjC,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,2BAA2B;YAC7C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB;QACD,IAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC;YACd,wDAAwD;YACxD,oDAAoD;YACpD,wDAAwD;YACxD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,0BAA0B;YAC1B,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YACnD,gCAAgC;YAChC,IAAI,CAAC,MAAM,EAAE,CAAC;SACjB;aAAK,IAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC;YACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAC,GAAG,CAAC,CAAC;YAC5C,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAC3C,IAAI,CAAC,YAAY,CAAC;gBACd,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;YACzC,CAAC,EAAE,CAAC,CAAC,CAAC;SACT;IACL,CAAC;IAED,uCAAY,GAAZ,UAAa,OAAO,EAAE,IAAI,EAAE,KAAK;QAC7B,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,uBAAuB;YACzC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACzB;IACL,CAAC;IAED,iCAAM,GAAN;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,wDAAwD;QACxD,oDAAoD;QACpD,wDAAwD;QACxD,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAC5B,IAAI,CAAC,YAAY,CAAC;YACd,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,oDAAoD;YACpD,uDAAuD;QAC3D,CAAC,EAAE,CAAC,CAAC,CAAC;IACV,CAAC;IAED,mCAAQ,GAAR;QACI,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/G,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAC5B,IAAI,CAAC,YAAY,CAAC;YACd,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC1B,CAAC,EAAE,CAAC,CAAC,CAAC;QACN,IAAI,CAAC,YAAY,CAAC;YACd,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACzB,CAAC,EAAE,CAAC,CAAC,CAAC;IACV,CAAC;IAED,sCAAW,GAAX,UAAY,MAAM;QACd,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;IAC3E,CAAC;IAED,mCAAQ,GAAR,UAAS,MAAM;QACX,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC;QAClB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;IACpE,CAAC;IAEM,qCAAU,GAAjB,UAAkB,OAAe;QAC7B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC;IAEM,0CAAe,GAAtB;QACI,oBAAoB;QACpB,gEAAgE;QAChE,yCAAyC;QACzC,cAAc;QACd,mCAAmC;QACnC,IAAI;QACJ,IAAG,IAAI,CAAC,OAAO,EAAC;YACZ,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACjB,OAAO;SACV;QACD,IAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,EAAC;YACrD,IAAG,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,SAAS;gBACvJ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC9B;QACD,IAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,EAAC;YACrB,gCAAgC;YAChC,0FAA0F;YAC1F,4FAA4F;YAC5F,gFAAgF;YAChF,oCAAoC;YACpC,oFAAoF;YACpF,mCAAmC;YACnC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SACrB;aACG;YACA,IAAG,IAAI,CAAC,OAAO,IAAI,CAAC,EACpB;gBACI,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;gBAC1D,6BAA6B;gBAC7B,yCAAyC;gBACzC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;aACpB;YACD,6BAA6B;YAC7B,wEAAwE;iBACnE,IAAG,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,SAAS;gBAC7J,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC9B;IACL,CAAC;IAEM,qCAAU,GAAjB,UAAkB,QAAgB;QAE9B,IAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAE,IAAI,QAAQ,IAAG,GAAG,EAAG,MAAM;YAC5D,wBAAwB;YACxB,6BAA6B;YAC7B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;QACzE,IAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC,IAAG,GAAG,EAAC;YAC3D,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAC/C;IACT,CAAC;IAEM,iCAAM,GAAb,UAAc,SAAkB;QAE5B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;IAC7D,CAAC;IAED,oCAAoC;IACpC,IAAI;IACJ,sCAAsC;IACtC,gEAAgE;IAChE,IAAI;IAEJ,iCAAM,GAAN;QACI,IAAG,IAAI,CAAC,OAAO,EAAC;YACZ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;;YAEG,IAAI,CAAC,QAAQ,EAAE,CAAC;IACxB,CAAC;IAED,mCAAQ,GAAR;QACI,oBAAoB;QACpB,uBAAuB;QACvB,cAAc;QACd,IAAI;QACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QACvD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtB,IAAG,IAAI,CAAC,EAAE,GAAC,CAAC,EAAC;YACT,gBAAgB;YAChB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACpE,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,CAAC;gBACd,kCAAkC;gBAClC,oBAAoB;gBACpB,yDAAyD;gBACzD,4BAA4B;gBAC5B,IAAI;gBACJ,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;gBACxD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAE,oBAAoB;gBACrD,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;gBACzC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;gBAChB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YACzB,CAAC,EAAE,CAAC,CAAC,CAAC;SACT;aACG;YACA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;IACL,CAAC;IAED,mCAAQ,GAAR;QAEI,gCAAgC;QAChC,mCAAmC;QACnC,uBAAuB;QACvB,sCAAsC;QACtC,2BAA2B;QAC3B,0BAA0B;QAE1B,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAE,WAAW;QACtC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC/D,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;QACrD,IAAI,CAAC,YAAY,CAAC;YACd,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAE,4BAA4B;QACpE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAE,YAAY;IAE1B,CAAC;IA/XD;QADC,QAAQ,EAAE;yDACe;IAG1B;QADC,QAAQ,EAAE;8DACmB;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;kDACG;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;yDACU;IAGjC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;oDACK;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;iDACE;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;2DACY;IAGnC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;yDACU;IAGjC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;iDACE;IAYzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACH;IAMf;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yDACC;IAInB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACH;IAjDE,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAoYpC;IAAD,uBAAC;CApYD,AAoYC,CApY6C,EAAE,CAAC,SAAS,GAoYzD;kBApYoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayerController extends cc.Component {\r\n\r\n    @property()\r\n    playerSpeed: number = 300;\r\n\r\n    @property()\r\n    playerStandSpeed: number = 50;\r\n\r\n    @property(cc.AudioClip)\r\n    jump: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    eatMushroom: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    shrink: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    win: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    gameoverSound: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    loseOneLife: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    bgm: cc.AudioClip = null;\r\n\r\n    private moveDir = 0;\r\n    private leftDown: boolean = false;\r\n    private rightDown: boolean = false;\r\n    private physicManager: cc.PhysicsManager = null;\r\n    private fallDown: boolean = false;\r\n    private idleFrame: cc.SpriteFrame = null;\r\n    private anim: cc.Animation = null;\r\n\r\n    HP: number = 5;\r\n    @property(cc.Node)\r\n    lifeNum = null;\r\n\r\n    private onGround: boolean = false;\r\n    \r\n    score: number = 0;\r\n    @property(cc.Node)\r\n    scorePoints = null;\r\n\r\n    time: number = 300;\r\n    @property(cc.Node)\r\n    timeNum = null;\r\n\r\n    isDead: boolean = false;\r\n    movable: boolean = true;\r\n    powerUp: boolean = false;\r\n    isStrong: boolean = false;\r\n    isPause: boolean = false;\r\n\r\n    onLoad(){\r\n        this.physicManager = cc.director.getPhysicsManager();\r\n        this.physicManager.enabled = true;\r\n        this.physicManager.gravity = cc.v2 (0, -200);\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    start (){\r\n        this.idleFrame = this.getComponent(cc.Sprite).spriteFrame;\r\n        // ========== TODO ==========\r\n        // 1. Assign the animation component into this.anim from this.node\r\n        this.anim = this.getComponent(cc.Animation);\r\n        this.node.scaleX=1;\r\n        //this.score = 5;  //this.HP  //TODO\r\n        // this.HP=5;\r\n        // this.score=0;\r\n        this.updateHP(0);\r\n        this.updateScore(0);\r\n        // this.schedule(function() {\r\n        //     this.time -= 1;\r\n        // }, 1);        \r\n    }\r\n\r\n    update (dt){\r\n        if(!this.isPause){  //TODO: when this.isPause, keep player static even if NOT on the ground\r\n            this.node.x += this.playerSpeed * this.moveDir * dt;\r\n            //this.node.getComponent(cc.RigidBody).enabled = true;;\r\n        }\r\n        else{\r\n            //this.node.getComponent(cc.RigidBody).enabled = false;\r\n        }\r\n        //this.node.scaleX = (this.moveDir > 0) ? 1 : -1;\r\n        if(this.moveDir > 0 && !this.isPause)\r\n            this.node.scaleX = 1;\r\n        else if(this.moveDir < 0 && !this.isPause)\r\n            this.node.scaleX = -1;\r\n        if(this.getComponent(cc.RigidBody).linearVelocity.y != 0)\r\n            this.fallDown = true;\r\n        else\r\n            this.fallDown = false;\r\n\r\n        this.playerAnimation();\r\n        // if(this.getComponent(cc.RigidBody).linearVelocity.y != 0){\r\n        //     if(!this.anim.getAnimationState(\"jump\").isPlaying)\r\n        //         this.anim.play(\"jump\");\r\n        // }\r\n        \r\n        //console.log(this.onGround);\r\n        // if(this.leftDown || this.rightDown){\r\n        //     if(!this.anim.getAnimationState(\"move\").isPlaying && !this.anim.getAnimationState(\"jump\").isPlaying)\r\n        //         this.anim.play(\"move\");\r\n        // }\r\n        if(this.node.position.y<-112 && this.isDead == false){\r\n            if(this.powerUp)\r\n                // this.schedule(function(){\r\n                //     this.node.scaleY *= 0.9090909*0.9090909*0.9090909; \r\n                // }, 3);\r\n                this.node.scaleY *= 0.9090909*0.9090909*0.9090909;\r\n                this.powerUp = false;\r\n            this.decrease();\r\n        }\r\n        if(!this.isDead){\r\n            this.time -= dt;\r\n        }\r\n        //time\r\n        if(this.time < 0 && !this.isDead){\r\n            this.decrease();\r\n            this.time = 0;\r\n        }\r\n        this.timeNum.getComponent(cc.Label).string = Math.floor(this.time).toString();\r\n    }\r\n\r\n    onKeyDown(event)\r\n    {\r\n        if(!this.movable || this.isDead){\r\n            this.playerMove(0);\r\n            return;\r\n        }\r\n\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.left:\r\n                this.leftDown = true;\r\n                this.playerMove(-1);\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.rightDown = true;\r\n                this.playerMove(1);\r\n                break;\r\n            case cc.macro.KEY.space:\r\n            case cc.macro.KEY.up:\r\n                this.playerJump(500);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event)\r\n    {\r\n        if(!this.movable || this.isDead){\r\n            this.playerMove(0);\r\n            return;\r\n        }\r\n\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.left:\r\n                this.leftDown = false;\r\n                if(this.rightDown)\r\n                    this.playerMove(1);\r\n                else\r\n                    this.playerMove(0);\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.rightDown = false;\r\n                if(this.leftDown)\r\n                    this.playerMove(-1);\r\n                else\r\n                    this.playerMove(0);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if(this.isDead)\r\n            contact.disabled = true;\r\n        //console.log(otherCollider.tag);\r\n        if (other.tag == 0) { // 假设地面节点的碰撞器 tag 设置为 0    \r\n            this.onGround = true;\r\n        }\r\n        if(other.tag == 6){\r\n            // this.getComponent(cc.RigidBody).linearVelocity.y = 0;\r\n            // this.getComponent(cc.RigidBody).gravityScale = 0;\r\n            // this.getComponent(cc.RigidBody).linearVelocity.y = 0;\r\n            this.updateScore(1000);\r\n            this.powerUp = true; \r\n            this.isPause = true;\r\n            //TODO: giant anim & audio\r\n            cc.audioEngine.playEffect(this.eatMushroom, false);\r\n            //this.anim.play(\"eatMushroom\");\r\n            this.getBig();\r\n        }else if(other.tag == 8){\r\n            this.isPause = true;\r\n            this.updateScore(Math.floor(this.time)*100);\r\n            cc.audioEngine.stopAll();\r\n            cc.audioEngine.playEffect(this.win, false); \r\n            this.scheduleOnce(function(){\r\n                cc.director.loadScene(\"stageSelect\");\r\n            }, 4);\r\n        }\r\n    }\r\n\r\n    onEndContact(contact, self, other) {\r\n        if (other.tag == 0) { // 假设地面节点的碰撞器 tag 设置为 0\r\n            this.onGround = false;\r\n        }\r\n    }\r\n\r\n    getBig(){\r\n        this.powerUp = true;\r\n        // this.getComponent(cc.RigidBody).linearVelocity.y = 0;\r\n        // this.getComponent(cc.RigidBody).gravityScale = 0;\r\n        // this.getComponent(cc.RigidBody).linearVelocity.y = 0;\r\n        let action = cc.repeat(cc.sequence(cc.scaleBy(0.2, 1, 1.1), cc.hide(), cc.delayTime(0.1), cc.show()), 3);\r\n        this.node.runAction(action);\r\n        this.scheduleOnce(function(){  //暫停1s\r\n            this.isPause = false;\r\n            //this.getComponent(cc.RigidBody).gravityScale = 10;\r\n            //this.getComponent(cc.RigidBody).linearVelocity.y = 0;\r\n        }, 1);\r\n    }\r\n\r\n    getSmall(){\r\n        cc.audioEngine.playEffect(this.shrink, false);\r\n        this.powerUp = false;\r\n        let action = cc.repeat(cc.sequence(cc.scaleBy(0.2, 1, 0.9090909), cc.hide(), cc.delayTime(0.1), cc.show()), 3);\r\n        this.node.runAction(action);\r\n        this.scheduleOnce(function(){  //無敵2s\r\n            this.isStrong = false;\r\n        }, 2);\r\n        this.scheduleOnce(function(){  //暫停1s\r\n            this.isPause = false;\r\n        }, 1);\r\n    }\r\n\r\n    updateScore(number) {\r\n        this.score += number;\r\n        this.scorePoints.getComponent(cc.Label).string = this.score.toString();\r\n    }\r\n\r\n    updateHP(number) {\r\n        this.HP += number;\r\n        this.lifeNum.getComponent(cc.Label).string = this.HP.toString();\r\n    }\r\n\r\n    public playerMove(moveDir: number){\r\n        this.moveDir = moveDir;\r\n    }\r\n\r\n    public playerAnimation(){\r\n        // if(this.powerUp){\r\n        //     if(!this.anim.getAnimationState(\"eatMushroom\").isPlaying)\r\n        //         this.anim.play(\"eatMushroom\");\r\n        //     // else\r\n        //     //     this.powerUp = false;\r\n        // }\r\n        if(this.isPause){\r\n            this.anim.stop();\r\n            return;\r\n        }\r\n        if(this.getComponent(cc.RigidBody).linearVelocity.y != 0){\r\n            if(!this.anim.getAnimationState(\"jump\").isPlaying && !this.anim.getAnimationState(\"die\").isPlaying && !this.anim.getAnimationState(\"eatMushroom\").isPlaying)\r\n                this.anim.play(\"jump\");\r\n        }\r\n        if(this.fallDown == true){\r\n            // // ========== TODO ==========\r\n            // // 1. Play fall_front animation (Checked the animation is playing or not and moveDir=0)\r\n            // // 2. Play fall_side animation (Checked the animation is playing or not and moveDir != 0)\r\n            // if(this.moveDir == 0 && !this.anim.getAnimationState(\"fall_front\").isPlaying)\r\n            //     this.anim.play(\"fall_front\");\r\n            // else if(this.moveDir != 0 && !this.anim.getAnimationState(\"fall_side\").isPlaying)\r\n            //     this.anim.play(\"fall_side\");\r\n            console.log(\"hi\");\r\n        }\r\n        else{\r\n            if(this.moveDir == 0)\r\n            {\r\n                this.getComponent(cc.Sprite).spriteFrame = this.idleFrame;\r\n                // ========== TODO ==========\r\n                // 1. Stop the animation which is playing\r\n                this.anim.stop();\r\n            }\r\n            // ========== TODO ==========\r\n            // 1. Play walk animation (Checked the walk animation is playing or not)\r\n            else if(!this.anim.getAnimationState(\"walk\").isPlaying && !this.anim.getAnimationState(\"jump\").isPlaying && !this.anim.getAnimationState(\"eatMushroom\").isPlaying)\r\n                this.anim.play(\"walk\");\r\n        }\r\n    }\r\n\r\n    public playerJump(velocity: number)\r\n    {\r\n        if((this.onGround && !this.fallDown ) || velocity== 501)  //if()\r\n            //this.onGround = false;\r\n            //console.log(this.onGround);\r\n            this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, velocity);\r\n            if(this.node.getComponent(cc.RigidBody).linearVelocity.y >=500){\r\n                cc.audioEngine.playEffect(this.jump, false);\r\n            }\r\n    }\r\n\r\n    public reborn(rebornPos: cc.Vec3)\r\n    {\r\n        this.node.position.x = rebornPos.x;\r\n        this.node.position.y = rebornPos.y;\r\n        this.getComponent(cc.RigidBody).linearVelocity = cc.v2();\r\n    }\r\n\r\n    // public reborn(rebornPos: cc.Vec3)\r\n    // {\r\n    //     this.node.position = rebornPos;\r\n    //     this.getComponent(cc.RigidBody).linearVelocity = cc.v2();\r\n    // }\r\n\r\n    damage(){\r\n        if(this.powerUp){\r\n            this.isStrong = true;\r\n            this.isPause = true;\r\n            this.getSmall();\r\n        }\r\n        else\r\n            this.decrease();\r\n    }\r\n\r\n    decrease(){\r\n        // if(this.powerUp){\r\n        //     this.getSmall();\r\n        //     return;\r\n        // }\r\n        this.isDead = true;\r\n        this.getComponent(cc.PhysicsBoxCollider).sensor = true;\r\n        this.movable = false;\r\n        this.leftDown = false;\r\n        this.rightDown = false;\r\n        this.moveDir = 0;\r\n        this.anim.play(\"die\");\r\n        if(this.HP>1){\r\n            //this.score-=1;\r\n            this.updateHP(-1);\r\n            this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 800);\r\n            cc.audioEngine.stopAll();\r\n            cc.audioEngine.playEffect(this.loseOneLife, false);\r\n            this.scheduleOnce(function() {\r\n                //cc.director.loadScene(\"level1\");\r\n                // if(this.powerUp){\r\n                //     this.node.scaleY *= 0.9090909*0.9090909*0.9090909;\r\n                //     this.powerUp = false;\r\n                // }\r\n                this.isDead = false;\r\n                this.getComponent(cc.PhysicsBoxCollider).sensor = false;\r\n                this.node.setPosition(-980, 0);  //40, 120 -> -160, 0\r\n                cc.audioEngine.playMusic(this.bgm, true);\r\n                this.movable = true;\r\n                this.time = 300;\r\n                this.node.scaleX = 1;\r\n            }, 3);\r\n        }    \r\n        else{\r\n            this.updateHP(-1);\r\n            this.gameOver();\r\n        } \r\n    }\r\n\r\n    gameOver()\r\n    {\r\n        // this.startIcon.active = true;\r\n        // this.player.node.active = false;\r\n        // this.inGame = false;\r\n        // this.unschedule(this.gatherEnergy);\r\n        // this.updateEnergyBar(0);\r\n        // this.gathering = false;\r\n\r\n        cc.audioEngine.stopAll();  //stopMusic\r\n        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 800);\r\n        cc.audioEngine.playEffect(this.gameoverSound, false);\r\n        this.scheduleOnce(function() {\r\n            cc.director.loadScene(\"gameOver\");  //gameOver, then stageSelect\r\n        }, 1.5);  //4.5 -> 1.5\r\n        \r\n    }\r\n\r\n}"]}